# misc aliases gnu-linux/freebsd/osx compatible

# set terminal title to current hostname and restore after ssh disconected
full_host="$(hostname)"
echo -ne "\033]0;${full_host}\007"
ssh(){ /usr/bin/ssh $@;echo -ne "\033]0;${full_host}\007"}

# pass ssh-agent socket to screen
_ssh_auth_save(){ ln -sf "$SSH_AUTH_SOCK" "$HOME/.screen/ssh-auth-sock.$HOSTNAME" }
alias screen='_ssh_auth_save ; export HOSTNAME=$(hostname) ; screen'

# ls alias
if ! type gls >/dev/null; then
	ls --group-directories-first 2>&1 >/dev/null
	rs=$?
	if [[ $rs != 0 ]]; then
		alias l='ls -lhFG'
		alias ll='ls -lahFG'
	else
		alias l='ls -lhF --group-directories-first --color'
		alias ll='ls -lahF --group-directories-first --color'
	fi
else
	alias l='gls -lhF --group-directories-first --color'
	alias ll='gls -lhaF --group-directories-first --color'
fi

alias ..='cd ..'
alias ...='cd ../..'
alias cd..='cd ..'
alias md='mkdir -p'
alias vi=vim
alias vl='vim -R -'
alias py='python'

# svn
#di(){ svn di $@ |vl; }
#diw(){ svn di --diff-cmd diff -x -uw $@ |vl; }

#badoo
alias b='cd ~/badoo/'
alias d3='ssh www1.d3'
alias d4='ssh www1.d4'
#alias wcgrep="grep --color -E -R -n --exclude='*.svn-base' --include='*.phtml' --include='*.php' --include='*.inc' --include='*.linc' --include='*.tpl' --include='*.css' --include='*.html' --include='*.js'"
#alias rg='grep -r --exclude-dir={./.git,./js,./tpl,./css,.svn,./testlib} -n --color'
#alias rg='grep -r --exclude-dir=.svn --exclude-dir=.git -n --color'
alias rg='grep -rn --color --exclude-dir=.git --exclude-dir=.svn --exclude-dir=testlib'
alias log='tail /local/php/log/badoo-`whoami`.log  -f -n100'
alias logs='tail /local/php/log/badoo-`whoami`.log  -f -n100 |grep -v "\[tpl\]"'
alias deploy='/local/php5/bin/php /local/deploy/src/_scripts/deploy/deployManager.php'
alias findx='find . -perm -o=x -type f'
jsl(){
	name=$1
	echo -ne 'vim ' && git log --stat --author=$name images/-/-/js|grep images/ |grep -oE '^ [^ ]+'|sort|uniq|xargs echo
}

#git
co(){
	echo "\e[0;32m*** $(git rev-parse --abbrev-ref HEAD)\e[0m"
	git status
}
alias ci='git ci -v'
alias up='git pull'
alias di='git diff -M -C'
alias diw='git diff -M -C -w'
alias dis='git diff -M -C --staged'
alias dip='git diff -M -C --all --not ORIG_HEAD'
alias bdi='git diff -M -C master...'
alias bl='git log -M -C --stat master..'
alias br='git branch'


